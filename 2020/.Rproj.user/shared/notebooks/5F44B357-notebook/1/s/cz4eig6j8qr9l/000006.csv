"0","outside_ <- "
"0","  demo_rules_df %>% "
"0","  filter(outside == ""shiny gold"") "
"0",""
"0",""
"0","check_layer <- function(bag, n = 1, df = demo_rules_df) {"
"0","  if (bag == ""no other"") {"
"0","    return(0)"
"0","  }"
"0","  "
"0","  subset_df <-"
"0","    df %>%"
"0","    filter(outside == bag)"
"0","  "
"0","  inside <- subset_df$inside"
"0","  new_n <- subset_df$inside_n"
"0","  print(inside)"
"0","  print(n * (1 + "
"0","               sum("
"0","                 unlist("
"0","                   lapply(1:length(inside), "
"0","                          function(x) check_layer(inside[x], new_n[x])"
"0","                          )))))"
"0","  "
"0","  "
"0","  return(n * (1 + "
"0","               sum("
"0","                 unlist("
"0","                   lapply(1:length(inside), "
"0","                          function(x) check_layer(inside[x], new_n[x])"
"0","                          )))))"
"0","}"
"0",""
"0","demo_rules_df <-"
"0","  demo_rules_df %>%"
"0","  mutate(inside_n = as.numeric(inside_n)) %>% "
"0","  replace_na(list(inside_n = 0))"
"0",""
"0",""
"0","check_layer(""shiny gold"")  "
"1","[1]"
"1"," ""dark olive""  "
"1"," ""vibrant plum"""
"1","
"
"1","[1]"
"1"," ""faded blue""  "
"1"," ""dotted black"""
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 3"
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 4"
"1","
"
"1","[1]"
"1"," 8"
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 3"
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 4"
"1","
"
"1","[1]"
"1"," ""faded blue""  "
"1"," ""dotted black"""
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 5"
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 6"
"1","
"
"1","[1]"
"1"," 24"
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 5"
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 6"
"1","
"
"1","[1]"
"1"," 33"
"1","
"
"1","[1]"
"1"," ""faded blue""  "
"1"," ""dotted black"""
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 3"
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 4"
"1","
"
"1","[1]"
"1"," 8"
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 3"
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 4"
"1","
"
"1","[1]"
"1"," ""faded blue""  "
"1"," ""dotted black"""
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 5"
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 6"
"1","
"
"1","[1]"
"1"," 24"
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 5"
"1","
"
"1","[1]"
"1"," ""no other"""
"1","
"
"1","[1]"
"1"," 6"
"1","
"
"1","[1]"
"1"," 33"
"1","
"
