"0","demo_input <- "
"0","  readLines(""demo_input.txt"")"
"0",""
"0","library(tidyverse)"
"0","`%not in%` <- Negate(`%in%`)"
"0",""
"0","extract_passport_df <- function(input) {"
"0","  passport_df <- tibble() "
"0","  passport_id <- 1"
"0","  for (line in input) {"
"0","    if (line == """") {"
"0","      passport_id <- passport_id + 1"
"0","      next"
"0","    }"
"0","    line_df <-"
"0","      line %>% "
"0","      str_split("" "", simplify = TRUE) %>%"
"0","      str_split("":"", simplify = TRUE) %>%"
"0","      as_tibble() %>%"
"0","      rename(field = V1, value = V2) %>%"
"0","      mutate(order = passport_id) "
"0","    passport_df <- bind_rows(passport_df, line_df)"
"0","  }"
"0","  passport_df"
"0","}"
"0",""
"0","count_valid_passports <- function(input, optional_fields = ""cid"", "
"0","                                  all_fields = c(""byr"", ""iyr"", ""eyr"", ""hgt"","
"0","                                                 ""hcl"", ""ecl"", ""pid"", ""cid"")) {"
"0","  required_fields <- setdiff(all_fields, optional_fields)"
"0","  passport_df <- extract_passport_df(input)"
"0","  "
"0","  passport_df %>% "
"0","    filter(field %not in% optional_fields) %>% "
"0","    group_by(order) %>% "
"0","    summarise(count = n()) %>%"
"0","    filter(count == length(required_fields)) %>% "
"0","    nrow()"
"0","}"
"0","count_valid_passports(demo_input)"
"2","`summarise()` ungrouping output (override with `.groups` argument)
"
"1","[1]"
"1"," 2"
"1","
"
